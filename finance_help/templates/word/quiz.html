
<div id="title">quiz</div>

<ul>
    <li class = "alternative">-</li>
    <li class = "alternative">-</li>
    <li class = "alternative">-</li>
    <li class = "alternative">-</li>
    <li class = "alternative">-</li>
</ul>

<button id="submit_button" style="border:1px solid rgb(41, 39, 175); margin:2px; border-radius:5px; color:rgb(41, 39, 175);"> Submit </button>


<script>

    console.log('script1작동');

    let word_quiz = JSON.parse("{{ random_js | escapejs }}");
    console.log(word_quiz);
    
    //점수 counting 변수
    let score=0, page = 0, isTrue=false;

    //button
    const submitButton = document.getElementById('submit_button');

    
    function showQuestion(q){
        
        //select dom element
        let titleDiv = document.getElementById('title');

        //modify it
        titleDiv.textContent = q.question;


        //.alternative -> alternative class에 적용
        let alts = document.querySelectorAll(".alternative")
        console.log(alts);
        alts.forEach(function(element,index){

            let choice;

            if( index == 0)
            {
                element.textContent = q.one;
                choice = q.one;
            }
            if( index == 1)
            {
                element.textContent = q.two;
                choice = q.two;
            }
            if( index == 2)
            {
                element.textContent = q.three;
                choice = q.three;
            }
            if( index == 3)
            {
                element.textContent = q.four;
                choice = q.four;
            }
            if( index == 4)
            {
                element.textContent = q.five;
                choice = q.five;
            }
            
            
            element.addEventListener('click',function(){
                //check correct answer
                console.log("check");
                console.log(choice);
                if(q.answer == choice)
                {
                    
                    isTrue = true;
                    console.log(isTrue);
                    
                }
                else{
                    
                    isTrue = false;
                    console.log(isTrue);
                }
                
            });

        });



    }


    const submit = ()=>{
                
                //check score
                console.log("score");
                if(isTrue == true)
                {
                    score++;
                    console.log(isTrue);
                    console.log(score);
                }
                else{
                    console.log(isTrue);
                    console.log(score);
                }
                page = page+1;
                if(page==5)
                {
                    alert(score+"개 정답");
                }
                else{
                    console.log('page:',page);
                    showQuestion(word_quiz[page].fields);
                }
                


    };

    if(page==0)
    {
        showQuestion(word_quiz[page].fields);
    }
    

    //EventListeners
    submitButton.addEventListener('click',submit);
    
    
   


</script>
   
